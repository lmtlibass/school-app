/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/app.js":
/*!********************!*\
  !*** ./src/app.js ***!
  \********************/
/***/ (() => {

eval("\n\n    const API_URL = \"https://bhuprmvnemqneqrwprpn.supabase.co/rest/v1/school_app\"\n    const API_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzOTMwNTgxMiwiZXhwIjoxOTU0ODgxODEyfQ.qju7skRPAGkGzrag_7KX25VBqwdFhCEs94dLFfGEJcw\" \n\nvar donnes = []\n\nconst form = document.getElementById(\"Myform\")\nconst nom = document.querySelector(\"input#nom\")\nconst prenom = document.querySelector(\"input#prenom\")\nconst biographie = document.querySelector(\"textarea#bio\")\nconst niveau = document.querySelector(\"select#niveau\")\nconst sauvegarder = document.getElementById(\"sauvegarder\")\nconst afficheApprenant = document.querySelector(\".affiche-apprenant\")\n\nbiographie.addEventListener('input', (e) => {\n    let textBio = document.getElementById(\"PBio\")\n    document.querySelector('#longeurText').innerHTML = biographie.value.length\n    biographie.maxLength = 130;\n    if (biographie.value.length === 130) {\n        biographie.style.border = \"5px solid red\"\n        textBio.style.color = \"red\"\n    } else {\n        biographie.style.border = \"solid black\"\n        textBio.style.color = \"black\"\n    }\n})\n\nform.addEventListener('submit', (e)=>{\n    e.preventDefault();\n    let nouveauapprenants = {\n        prenom : prenom.value,\n        nom : nom.value,\n        bio : biographie.value,\n        niveau : niveau.value\n    }\n    apprenantAffiche(nouveauapprenants.nom, nouveauapprenants.prenom, nouveauapprenants.bio, nouveauapprenants.niveau)\n    donnes.push(nouveauapprenants)\n   modifierChamp()\n   deletecarte()\n})\n\n\nfunction apprenantAffiche(nom, prenom, bio, niveau){\n    afficheApprenant.insertAdjacentHTML(\n        \"beforeend\",\n        `<div class=\"card\" style=\"width: 18rem;\">\n        <img src=\"/img/ex.png\" class=\"card-img-top\" alt=\"...\">\n        <div class=\"card-body\">\n        <h5 class=\"card-title\"><span>${nom}</span><span>${prenom}</span></h5>\n        <p class=\"card-text\">${bio}</p>\n        <p class=\"niveau card-text\">${niveau}</p>\n        <div class=\"card-icone d-flex flex-row  justify-content-between\">\n        <a href=\"#\" class=\"btn btn-outline-success\" id=\"modifier\"><i class=\"bi bi-pen\"></i></a>\n        <a href=\"#\" class=\"btn btn-outline-danger\" id=\"annuler\"><i class=\"bi bi-x-circle\"></i></a>\n        </div>\n        </div>\n    </div>`\n    )  \n}    \nfunction modifierChamp(){\n    const modifier = document.getElementById(\"modifier\")\n    modifier.addEventListener('click', (e)=>{\n        e.preventDefault()\n    let nomModifier = document.createElement('input')\n    nomModifier.setAttribute(\"placeholder\", \"modifier prenom & nom*\")\n    let baliseh5 = document.querySelector(\".card-title\")\n    let balisep = document.querySelector(\".card-text\")\n    let bioModifier = document.createElement('textarea')\n    \n\n    let carteModifier = document.querySelector(\".card-body\")\n\n    carteModifier.replaceChild(nomModifier, baliseh5)\n    carteModifier.replaceChild(bioModifier, balisep)\n        let carte = document.querySelector(\".card\")\n    \n    modifier.addEventListener('click', ()=>{\n        let nouveauNom = nomModifier.value\n        let nouveauBio = bioModifier.value   \n        apprenantAffiche(nouveauNom, \"\", nouveauBio)\n        carte.remove()\n    })   \n})\n    deletecarte()   \n}\n        //suppression carte\n        function deletecarte(){\n            const annule = document.getElementById(\"annuler\")\n            annule.addEventListener('click', ()=>{\n                let carte = document.querySelector(\".card\")\n                carte.remove()\n            })\n        }\n        \n    //modification et suppression de la nouvelle carte \n \n\n    sauvegarder.addEventListener('click', (e)=>{\n        e.preventDefault()\n        fetch(API_URL, {\n                method: \"POST\",\n                headers: {\n                    apiKey: API_KEY,\n                    \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify(donnes),\n            })\n            return donnes = []\n        })\n\n\n   /*  (function showData(){\n        let { data: school_app, error } = await supabase\n            .from('school_app')\n            .select('*')\n            \n    })() */\n\n\n    fetch(API_URL, {\n        headers: {\n          apikey: API_KEY,\n        },\n      })\n        .then((response) => response.json(),)\n        .then ((donnes) => {\n          donnes.forEach((donnee) => showListe(donnee.nom, donnee.prenom, donnee.bio, donnee.niveau))\n        })\n  \n  function showListe(nom, prenom, bio, niveau){\n      const listeApprenant = document.querySelector(\".Liste\")   \n          listeApprenant.insertAdjacentHTML(\n              \"beforeend\", \n              `<div class=\"card\" style=\"width: 18rem;\">\n              <img src=\"/img/ex.png\" class=\"card-img-top\" alt=\"...\">\n              <div class=\"card-body\">\n              <h5 class=\"card-title\"><span>${nom}</span><span>${prenom}</span></h5>\n              <p class=\"card-text\">${bio}</p>\n              <p class=\"niveau card-text\">${niveau}</p>\n              <div class=\"card-icone d-flex flex-row  justify-content-between\">\n              <a href=\"#\" class=\"btn btn-outline-success\" id=\"modifier\"><i class=\"bi bi-pen\"></i></a>\n              <a href=\"#\" class=\"btn btn-outline-danger\" id=\"annuler\"><i class=\"bi bi-x-circle\"></i></a>\n              </div>\n              </div>\n          </div>`\n          )\n          \n      }  \n  \n\n//# sourceURL=webpack://school-app/./src/app.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/app.js"]();
/******/ 	
/******/ })()
;